\hypertarget{neuron_8h}{}\section{/home/mplagge/development/tnt\+\_\+benchmark/models/neuron.h File Reference}
\label{neuron_8h}\index{/home/mplagge/development/tnt\+\_\+benchmark/models/neuron.\+h@{/home/mplagge/development/tnt\+\_\+benchmark/models/neuron.\+h}}
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include \char`\"{}../assist.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../mapping.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}ross.\+h\char`\"{}}\\*
{\ttfamily \#include $<$stdbool.\+h$>$}\\*
Include dependency graph for neuron.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=340pt]{neuron_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{neuron_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
union \hyperlink{unionreset_rate}{reset\+Rate}
\begin{DoxyCompactList}\small\item\em Reset\+Rate This is a support union for neuron reset rates. \end{DoxyCompactList}\item 
struct \hyperlink{structneuron_state}{neuron\+State}
\begin{DoxyCompactList}\small\item\em This struct maintains the state of an individual neuron.\+The neuron struct contains the parameters needed to maintain state in the neuron, along with references to output commands (dendrites). \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \hyperlink{neuron_8h_a7362d32c8d9b6dc323f5d1b05af9855b}{leak\+Fun\+Del}) (void $\ast$\hyperlink{structneuron_state}{neuron\+State}, tw\+\_\+stime now)
\item 
typedef void($\ast$ \hyperlink{neuron_8h_abf61b10b4b6116161a9e5c9d7ac54be1}{reverse\+Leak\+Del}) (void $\ast$neuron, tw\+\_\+stime now)
\item 
typedef void($\ast$ \hyperlink{neuron_8h_ae7e5990745cd949246894bfb633ca4a2}{reset\+Fun\+Del}) (void $\ast$\hyperlink{structneuron_state}{neuron\+State})
\begin{DoxyCompactList}\small\item\em Reset\+Fun\+Del -\/ This is a function that handles different reset rate calculations. \end{DoxyCompactList}\item 
typedef void($\ast$ \hyperlink{neuron_8h_aa939c0acc5b3367975f2f0cb7bc36d17}{reverse\+Reset\+Del}) (void $\ast$\hyperlink{structneuron_state}{neuron\+State})
\begin{DoxyCompactList}\small\item\em This is a function that reverses the reset command. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{neuron_8h_a48885ea6be5b55a2e24de9f97552d4ee}{neuron\+Fire\+Mode} \{ \hyperlink{neuron_8h_a48885ea6be5b55a2e24de9f97552d4eea520c6b216334b8c2d914cf9fab8cd460}{N\+F\+M} = 0
 \}
\begin{DoxyCompactList}\small\item\em typedef Neuron\+Fire\+Mode Just in case there are multiple fire modes, this enum exists to differentiate them. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{neuron_8h_a8e52befc10f975c6be39cc93af573d7e}{no\+Leak} (void $\ast$neuron, tw\+\_\+stime now)
\begin{DoxyCompactList}\small\item\em no\+Leak -\/ A non leaking neuron function. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_a64dc379b459a2b07b40bce35381210e8}{linear\+Leak} (void $\ast$neuron, tw\+\_\+stime now)
\begin{DoxyCompactList}\small\item\em A linear leak function -\/ uses monotonic up and down leaks. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_a5a4f7abf694fe6ff2aa68ebd5584bc4b}{monotonic\+Up\+Leak} (void $\ast$neuron, tw\+\_\+stime now)
\item 
void \hyperlink{neuron_8h_a8c023bc2fc6d628a105b460226b106f9}{monotonic\+Down\+Leak} (void $\ast$neuron, tw\+\_\+stime now)
\item 
void \hyperlink{neuron_8h_a5477909af0c953cabd578adf0695e5e5}{divergent\+Leak} (void $\ast$neuron, tw\+\_\+stime now)
\item 
void \hyperlink{neuron_8h_ad5df8be6cabf9a00abf073cee3be0362}{convergent\+Leak} (void $\ast$neuron, tw\+\_\+stime now)
\item 
void \hyperlink{neuron_8h_ac5bebec77c5216533ec5f6acd086532e}{rev\+No\+Leak} (void $\ast$neuron, tw\+\_\+stime now)
\begin{DoxyCompactList}\small\item\em Reverse leak function for use when neurons have no defined leak function. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_a26ced40d7ad7a0b448a136d8724fe18b}{rev\+Linear\+Leak} (void $\ast$neuron, tw\+\_\+stime now)
\begin{DoxyCompactList}\small\item\em Reverse leak function neurons that have a linear leak function assigned. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_a233aa7ebe6cbfb664fe366a05a8dac1f}{reset\+Normal} (void $\ast$\hyperlink{structneuron_state}{neuron\+State})
\begin{DoxyCompactList}\small\item\em Resets neuron voltage to $R$ after firing. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_a2e78d7d2b70bf7349c3854b3727dcc25}{reset\+Linear} (void $\ast$\hyperlink{structneuron_state}{neuron\+State})
\begin{DoxyCompactList}\small\item\em Resets neuron voltage based on linear function. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_a6e11be912b4860cd1978b2d8c49b9703}{reset\+None} (void $\ast$\hyperlink{structneuron_state}{neuron\+State})
\begin{DoxyCompactList}\small\item\em No reset function -\/ does not reset membrane potential after firing. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_a09e54832158e2f6abe898437979aae00}{reverse\+Reset\+Linear} (void $\ast$\hyperlink{structneuron_state}{neuron\+State})
\item 
void \hyperlink{neuron_8h_ae53276ccdb759ba1ea09806cbf9fc940}{reverse\+Reset\+Zero} (void $\ast$\hyperlink{structneuron_state}{neuron\+State})
\item 
void \hyperlink{neuron_8h_a50b2475c0a8d745eb8f144b72d7eabdf}{reverse\+Reset\+None} (void $\ast$\hyperlink{structneuron_state}{neuron\+State})
\item 
void \hyperlink{neuron_8h_a01dcc8e3f0132786bd59ecb847013284}{neuron\+Reverse\+Final} (\hyperlink{structneuron_state}{neuron\+State} $\ast$s, tw\+\_\+bf $\ast$C\+V, \hyperlink{struct_msg___data}{Msg\+\_\+\+Data} $\ast$m, tw\+\_\+lp $\ast$lp)
\begin{DoxyCompactList}\small\item\em neuron\+Reverse\+Final final neuron reversal function. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_aa6819d7492f0173f2234ba0b8b0bb674}{neuron\+Receive\+Message} (\hyperlink{structneuron_state}{neuron\+State} $\ast$st, tw\+\_\+stime time, \hyperlink{struct_msg___data}{Msg\+\_\+\+Data} $\ast$m, tw\+\_\+lp $\ast$lp)
\begin{DoxyCompactList}\small\item\em handles incomming synapse messages. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_a683379b633b55058dd5b8b67929c165c}{neuron\+Fire} (\hyperlink{structneuron_state}{neuron\+State} $\ast$st, tw\+\_\+stime time, tw\+\_\+lp $\ast$lp)
\begin{DoxyCompactList}\small\item\em neuron\+Fire manages a firing event. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_ae630bdf5dd3744870968f07a6971659c}{integrate\+Synapse} (\hyperlink{assist_8h_a3f7a6e6a1210b6d9d7a42177dcb9634b}{\+\_\+id\+T} synapse\+I\+D, \hyperlink{structneuron_state}{neuron\+State} $\ast$st, tw\+\_\+lp $\ast$lp)
\begin{DoxyCompactList}\small\item\em function that adds a synapse\textquotesingle{}s value to the current neuron\textquotesingle{}s membrane potential. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_a766dff9e530486b055e97ebe392268b8}{send\+Heartbeat} (\hyperlink{structneuron_state}{neuron\+State} $\ast$st, tw\+\_\+lp $\ast$lp, tw\+\_\+stime time)
\begin{DoxyCompactList}\small\item\em Function that sends a heartbeat message to this neuron. \end{DoxyCompactList}\item 
bool \hyperlink{neuron_8h_a3520b013e0c2f711b9f5c16e19306be6}{neuron\+Should\+Fire} (\hyperlink{structneuron_state}{neuron\+State} $\ast$st, tw\+\_\+lp $\ast$lp)
\begin{DoxyCompactList}\small\item\em Checks to see if a neuron should fire. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_aabaff47eadb1e61b34c19b6e982f6511}{neuron\+Post\+Integrate} (\hyperlink{structneuron_state}{neuron\+State} $\ast$st, tw\+\_\+stime time, tw\+\_\+lp $\ast$lp, bool will\+Fire)
\begin{DoxyCompactList}\small\item\em Function that runs after integration \& firing, for reset function and threshold bounce calls. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_afee2e0acc66d8d10aee8d52c8d245c82}{stochastic\+Integrate} (\hyperlink{assist_8h_aa73c5ea0fe4ba938c96e6771b38dcb2a}{\+\_\+weight\+T} weight, \hyperlink{structneuron_state}{neuron\+State} $\ast$st, tw\+\_\+lp $\ast$lp)
\begin{DoxyCompactList}\small\item\em Neuron stochastic integration function -\/ for use with stochastic leaks and synapse messages. \end{DoxyCompactList}\item 
void \hyperlink{neuron_8h_aaae24f12a4b2a537740f29d65eb3e51e}{neron\+Reverse\+Sate} (\hyperlink{structneuron_state}{neuron\+State} $\ast$s, tw\+\_\+bf $\ast$C\+V, \hyperlink{struct_msg___data}{Msg\+\_\+\+Data} $\ast$M, tw\+\_\+lp $\ast$lp)
\end{DoxyCompactItemize}


\subsection{Typedef Documentation}
\hypertarget{neuron_8h_a7362d32c8d9b6dc323f5d1b05af9855b}{}\index{neuron.\+h@{neuron.\+h}!leak\+Fun\+Del@{leak\+Fun\+Del}}
\index{leak\+Fun\+Del@{leak\+Fun\+Del}!neuron.\+h@{neuron.\+h}}
\subsubsection[{leak\+Fun\+Del}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ {\bf leak\+Fun\+Del}) (void $\ast${\bf neuron\+State}, tw\+\_\+stime now)}\label{neuron_8h_a7362d32c8d9b6dc323f5d1b05af9855b}


Definition at line \hyperlink{neuron_8h_source_l00033}{33} of file \hyperlink{neuron_8h_source}{neuron.\+h}.

\hypertarget{neuron_8h_ae7e5990745cd949246894bfb633ca4a2}{}\index{neuron.\+h@{neuron.\+h}!reset\+Fun\+Del@{reset\+Fun\+Del}}
\index{reset\+Fun\+Del@{reset\+Fun\+Del}!neuron.\+h@{neuron.\+h}}
\subsubsection[{reset\+Fun\+Del}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ reset\+Fun\+Del) (void $\ast${\bf neuron\+State})}\label{neuron_8h_ae7e5990745cd949246894bfb633ca4a2}


Reset\+Fun\+Del -\/ This is a function that handles different reset rate calculations. 

It takes the state of the neuron, and applies various reset functions to the neuron\textquotesingle{}s voltage. Some reset functions described by true north include a zeroing function (standard integrate and fire), a linear drop function, and a non-\/reduction function. Also functions for leaks below. 

Definition at line \hyperlink{neuron_8h_source_l00094}{94} of file \hyperlink{neuron_8h_source}{neuron.\+h}.

\hypertarget{neuron_8h_abf61b10b4b6116161a9e5c9d7ac54be1}{}\index{neuron.\+h@{neuron.\+h}!reverse\+Leak\+Del@{reverse\+Leak\+Del}}
\index{reverse\+Leak\+Del@{reverse\+Leak\+Del}!neuron.\+h@{neuron.\+h}}
\subsubsection[{reverse\+Leak\+Del}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ {\bf reverse\+Leak\+Del}) (void $\ast$neuron, tw\+\_\+stime now)}\label{neuron_8h_abf61b10b4b6116161a9e5c9d7ac54be1}


Definition at line \hyperlink{neuron_8h_source_l00059}{59} of file \hyperlink{neuron_8h_source}{neuron.\+h}.

\hypertarget{neuron_8h_aa939c0acc5b3367975f2f0cb7bc36d17}{}\index{neuron.\+h@{neuron.\+h}!reverse\+Reset\+Del@{reverse\+Reset\+Del}}
\index{reverse\+Reset\+Del@{reverse\+Reset\+Del}!neuron.\+h@{neuron.\+h}}
\subsubsection[{reverse\+Reset\+Del}]{\setlength{\rightskip}{0pt plus 5cm}reverse\+Reset\+Del}\label{neuron_8h_aa939c0acc5b3367975f2f0cb7bc36d17}


This is a function that reverses the reset command. 

Run first, since the reset function is run last. 

Definition at line \hyperlink{neuron_8h_source_l00125}{125} of file \hyperlink{neuron_8h_source}{neuron.\+h}.



\subsection{Enumeration Type Documentation}
\hypertarget{neuron_8h_a48885ea6be5b55a2e24de9f97552d4ee}{}\index{neuron.\+h@{neuron.\+h}!neuron\+Fire\+Mode@{neuron\+Fire\+Mode}}
\index{neuron\+Fire\+Mode@{neuron\+Fire\+Mode}!neuron.\+h@{neuron.\+h}}
\subsubsection[{neuron\+Fire\+Mode}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf neuron\+Fire\+Mode}}\label{neuron_8h_a48885ea6be5b55a2e24de9f97552d4ee}


typedef Neuron\+Fire\+Mode Just in case there are multiple fire modes, this enum exists to differentiate them. 

\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{N\+F\+M@{N\+F\+M}!neuron.\+h@{neuron.\+h}}\index{neuron.\+h@{neuron.\+h}!N\+F\+M@{N\+F\+M}}\item[{\em 
\hypertarget{neuron_8h_a48885ea6be5b55a2e24de9f97552d4eea520c6b216334b8c2d914cf9fab8cd460}{}N\+F\+M\label{neuron_8h_a48885ea6be5b55a2e24de9f97552d4eea520c6b216334b8c2d914cf9fab8cd460}
}]\end{description}
\end{Desc}


Definition at line \hyperlink{neuron_8h_source_l00023}{23} of file \hyperlink{neuron_8h_source}{neuron.\+h}.


\begin{DoxyCode}
00023                                 \{
00024   \hyperlink{neuron_8h_a48885ea6be5b55a2e24de9f97552d4eea520c6b216334b8c2d914cf9fab8cd460}{NFM} = 0  \textcolor{comment}{// normal fire mode (if voltage > threshold, fire);}
00025     \} \hyperlink{neuron_8h_a48885ea6be5b55a2e24de9f97552d4ee}{neuronFireMode};
\end{DoxyCode}


\subsection{Function Documentation}
\hypertarget{neuron_8h_ad5df8be6cabf9a00abf073cee3be0362}{}\index{neuron.\+h@{neuron.\+h}!convergent\+Leak@{convergent\+Leak}}
\index{convergent\+Leak@{convergent\+Leak}!neuron.\+h@{neuron.\+h}}
\subsubsection[{convergent\+Leak}]{\setlength{\rightskip}{0pt plus 5cm}void convergent\+Leak (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron, }
\item[{tw\+\_\+stime}]{now}
\end{DoxyParamCaption}
)}\label{neuron_8h_ad5df8be6cabf9a00abf073cee3be0362}
\hypertarget{neuron_8h_a5477909af0c953cabd578adf0695e5e5}{}\index{neuron.\+h@{neuron.\+h}!divergent\+Leak@{divergent\+Leak}}
\index{divergent\+Leak@{divergent\+Leak}!neuron.\+h@{neuron.\+h}}
\subsubsection[{divergent\+Leak}]{\setlength{\rightskip}{0pt plus 5cm}void divergent\+Leak (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron, }
\item[{tw\+\_\+stime}]{now}
\end{DoxyParamCaption}
)}\label{neuron_8h_a5477909af0c953cabd578adf0695e5e5}
\hypertarget{neuron_8h_ae630bdf5dd3744870968f07a6971659c}{}\index{neuron.\+h@{neuron.\+h}!integrate\+Synapse@{integrate\+Synapse}}
\index{integrate\+Synapse@{integrate\+Synapse}!neuron.\+h@{neuron.\+h}}
\subsubsection[{integrate\+Synapse}]{\setlength{\rightskip}{0pt plus 5cm}void integrate\+Synapse (
\begin{DoxyParamCaption}
\item[{{\bf \+\_\+id\+T}}]{synapse\+I\+D, }
\item[{{\bf neuron\+State} $\ast$}]{st, }
\item[{tw\+\_\+lp $\ast$}]{lp}
\end{DoxyParamCaption}
)}\label{neuron_8h_ae630bdf5dd3744870968f07a6971659c}


function that adds a synapse\textquotesingle{}s value to the current neuron\textquotesingle{}s membrane potential. 


\begin{DoxyParams}{Parameters}
{\em synapse\+I\+D} & local\+I\+D of the synapse sending the message. \\
\hline
\end{DoxyParams}


Definition at line \hyperlink{neuron_8c_source_l00199}{199} of file \hyperlink{neuron_8c_source}{neuron.\+c}.



References \hyperlink{assist_8h_source_l00020}{\+\_\+volt\+T}, \hyperlink{neuron_8h_source_l00153}{neuron\+State\+::membrane\+Pot}, \hyperlink{neuron_8c_source_l00191}{stochastic\+Integrate()}, \hyperlink{neuron_8h_source_l00187}{neuron\+State\+::synaptic\+Weight\+Prob}, and \hyperlink{neuron_8h_source_l00192}{neuron\+State\+::synaptic\+Weight\+Prob\+Select}.



Referenced by \hyperlink{neuron_8c_source_l00103}{neuron\+Receive\+Message()}.


\begin{DoxyCode}
00199                                                                  \{
00200 
00201     \textcolor{keywordflow}{if}(st->\hyperlink{structneuron_state_a4568f103808a436a62d7c7c47dc90e9b}{synapticWeightProbSelect}[synapseID] == \textcolor{keyword}{true}) \{
00202         \hyperlink{neuron_8c_afee2e0acc66d8d10aee8d52c8d245c82}{stochasticIntegrate}(st->\hyperlink{structneuron_state_aa71c0acf1edf08865e1f9729a2414efa}{synapticWeightProb}[synapseID], st, lp)
      ;
00203     \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{//det. mode integrate:}
00204         \hyperlink{assist_8h_abe1fc1b8f9efd1187e564bcb8de7f815}{\_voltT} adjustedWeight = st->\hyperlink{structneuron_state_aa71c0acf1edf08865e1f9729a2414efa}{synapticWeightProb}[synapseID];
00205         st->\hyperlink{structneuron_state_a0fdd8f44c4105a94e17c4c58a51db486}{membranePot} += adjustedWeight;
00206     \}
00207 
00208 
00209 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=308pt]{neuron_8h_ae630bdf5dd3744870968f07a6971659c_cgraph}
\end{center}
\end{figure}


\hypertarget{neuron_8h_a64dc379b459a2b07b40bce35381210e8}{}\index{neuron.\+h@{neuron.\+h}!linear\+Leak@{linear\+Leak}}
\index{linear\+Leak@{linear\+Leak}!neuron.\+h@{neuron.\+h}}
\subsubsection[{linear\+Leak}]{\setlength{\rightskip}{0pt plus 5cm}void linear\+Leak (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron, }
\item[{tw\+\_\+stime}]{now}
\end{DoxyParamCaption}
)}\label{neuron_8h_a64dc379b459a2b07b40bce35381210e8}


A linear leak function -\/ uses monotonic up and down leaks. 


\begin{DoxyParams}{Parameters}
{\em neuron} & The current neuron state. \\
\hline
{\em now} & The current simulation time.\\
\hline
\end{DoxyParams}
Linear\+Leak is the standard linear leak function from the paper. Using the leak\+Rate parameter inside \hyperlink{}{the neuron state }, this follows a simple linear function, reducing the membrane potential by a fixed rate per tick.

\begin{DoxySeeAlso}{See also}
Neuron\+Model 
\end{DoxySeeAlso}


Definition at line \hyperlink{neuron_8c_source_l00028}{28} of file \hyperlink{neuron_8c_source}{neuron.\+c}.



References \hyperlink{assist_8c_source_l00030}{get\+Current\+Big\+Tick()}, and \hyperlink{neuron_8h_source_l00162}{neuron\+State\+::last\+Leak\+Time}.


\begin{DoxyCode}
00028                                             \{
00029     \hyperlink{structneuron_state}{neuronState} *s = (\hyperlink{structneuron_state}{neuronState} *)neuron;
00030     tw\_stime bigTick = \hyperlink{assist_8c_a4d378196b7fceed090d64ec8820b4065}{getCurrentBigTick}(now);
00031     tw\_stime delta = bigTick - s->\hyperlink{structneuron_state_a6f4e4d8fc1cf0257b486e01f628d2656}{lastLeakTime};
00032 
00033         \textcolor{comment}{//s->membranePot -= s->leakRate * delta;}
00034     s->\hyperlink{structneuron_state_a6f4e4d8fc1cf0257b486e01f628d2656}{lastLeakTime} = now;
00035 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=272pt]{neuron_8h_a64dc379b459a2b07b40bce35381210e8_cgraph}
\end{center}
\end{figure}


\hypertarget{neuron_8h_a8c023bc2fc6d628a105b460226b106f9}{}\index{neuron.\+h@{neuron.\+h}!monotonic\+Down\+Leak@{monotonic\+Down\+Leak}}
\index{monotonic\+Down\+Leak@{monotonic\+Down\+Leak}!neuron.\+h@{neuron.\+h}}
\subsubsection[{monotonic\+Down\+Leak}]{\setlength{\rightskip}{0pt plus 5cm}void monotonic\+Down\+Leak (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron, }
\item[{tw\+\_\+stime}]{now}
\end{DoxyParamCaption}
)}\label{neuron_8h_a8c023bc2fc6d628a105b460226b106f9}
\hypertarget{neuron_8h_a5a4f7abf694fe6ff2aa68ebd5584bc4b}{}\index{neuron.\+h@{neuron.\+h}!monotonic\+Up\+Leak@{monotonic\+Up\+Leak}}
\index{monotonic\+Up\+Leak@{monotonic\+Up\+Leak}!neuron.\+h@{neuron.\+h}}
\subsubsection[{monotonic\+Up\+Leak}]{\setlength{\rightskip}{0pt plus 5cm}void monotonic\+Up\+Leak (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron, }
\item[{tw\+\_\+stime}]{now}
\end{DoxyParamCaption}
)}\label{neuron_8h_a5a4f7abf694fe6ff2aa68ebd5584bc4b}
\hypertarget{neuron_8h_aaae24f12a4b2a537740f29d65eb3e51e}{}\index{neuron.\+h@{neuron.\+h}!neron\+Reverse\+Sate@{neron\+Reverse\+Sate}}
\index{neron\+Reverse\+Sate@{neron\+Reverse\+Sate}!neuron.\+h@{neuron.\+h}}
\subsubsection[{neron\+Reverse\+Sate}]{\setlength{\rightskip}{0pt plus 5cm}void neron\+Reverse\+Sate (
\begin{DoxyParamCaption}
\item[{{\bf neuron\+State} $\ast$}]{s, }
\item[{tw\+\_\+bf $\ast$}]{C\+V, }
\item[{{\bf Msg\+\_\+\+Data} $\ast$}]{M, }
\item[{tw\+\_\+lp $\ast$}]{lp}
\end{DoxyParamCaption}
)}\label{neuron_8h_aaae24f12a4b2a537740f29d65eb3e51e}


Definition at line \hyperlink{neuron_8c_source_l00232}{232} of file \hyperlink{neuron_8c_source}{neuron.\+c}.



References \hyperlink{assist_8h_source_l00071}{Msg\+\_\+\+Data\+::event\+Type}, \hyperlink{neuron_8h_source_l00214}{neuron\+State\+::fire\+Count}, \hyperlink{neuron_8h_source_l00218}{neuron\+State\+::fired\+Last}, \hyperlink{neuron_8h_source_l00161}{neuron\+State\+::last\+Active\+Time}, \hyperlink{neuron_8h_source_l00162}{neuron\+State\+::last\+Leak\+Time}, \hyperlink{neuron_8h_source_l00153}{neuron\+State\+::membrane\+Pot}, \hyperlink{neuron_8h_source_l00166}{neuron\+State\+::received\+Synapse\+Msgs}, \hyperlink{neuron_8h_source_l00164}{neuron\+State\+::saved\+Last\+Active\+Time}, \hyperlink{neuron_8h_source_l00165}{neuron\+State\+::saved\+Last\+Leak\+Time}, \hyperlink{neuron_8h_source_l00154}{neuron\+State\+::saved\+Membrane\+Pot}, \hyperlink{neuron_8h_source_l00216}{neuron\+State\+::\+S\+O\+P\+S\+Count}, and \hyperlink{assist_8h_source_l00060}{S\+Y\+N\+A\+P\+S\+E\+\_\+\+O\+U\+T}.


\begin{DoxyCode}
00232                                                                          \{
00233         \textcolor{comment}{//reverse function.}
00234     \textcolor{keywordflow}{if}(M->\hyperlink{struct_msg___data_a015b6eb45982e1842ee8fc389a099ced}{eventType} == \hyperlink{assist_8h_a7c1688de451e0dea1e11617bce3ec450a6ad6b93d8a818550e7246f6e0d143afb}{SYNAPSE\_OUT})
00235         s->\hyperlink{structneuron_state_af8935bcba177f2f3dfb9119c39ef7dc5}{receivedSynapseMsgs} --;
00236     \textcolor{keywordflow}{else}
00237         s->\hyperlink{structneuron_state_a71fbb9a79e8048b473b6e09d29a64bbe}{SOPSCount} --;
00238 
00239     \textcolor{keywordflow}{if}(s->\hyperlink{structneuron_state_a287eb8703dbfb177165d31c8840646b8}{firedLast} == \textcolor{keyword}{true})\{
00240         s->\hyperlink{structneuron_state_afe8825076c4cf3863c677307fec63c61}{fireCount} --;
00241     \}
00242 
00243     s->\hyperlink{structneuron_state_a0fdd8f44c4105a94e17c4c58a51db486}{membranePot}  = s->\hyperlink{structneuron_state_a5efe5de0478ea513ed5d90d89a49fcca}{savedMembranePot};
00244     s->\hyperlink{structneuron_state_a0658ad1f8b57a00589c6ea84f9a4ab13}{lastActiveTime} = s->\hyperlink{structneuron_state_a6922b3f3041346eb83cfc6352a22277b}{savedLastActiveTime};
00245     s->\hyperlink{structneuron_state_a6f4e4d8fc1cf0257b486e01f628d2656}{lastLeakTime} = s->\hyperlink{structneuron_state_a50734a9ba605a083a90814b63d039a03}{savedLastLeakTime};
00246 
00247 
00248 \}
\end{DoxyCode}
\hypertarget{neuron_8h_a683379b633b55058dd5b8b67929c165c}{}\index{neuron.\+h@{neuron.\+h}!neuron\+Fire@{neuron\+Fire}}
\index{neuron\+Fire@{neuron\+Fire}!neuron.\+h@{neuron.\+h}}
\subsubsection[{neuron\+Fire}]{\setlength{\rightskip}{0pt plus 5cm}void neuron\+Fire (
\begin{DoxyParamCaption}
\item[{{\bf neuron\+State} $\ast$}]{st, }
\item[{tw\+\_\+stime}]{time, }
\item[{tw\+\_\+lp $\ast$}]{lp}
\end{DoxyParamCaption}
)}\label{neuron_8h_a683379b633b55058dd5b8b67929c165c}


neuron\+Fire manages a firing event. 

Firing events occur when a synchro message is received, so these calculations are done on big-\/ticks only. 

Definition at line \hyperlink{neuron_8c_source_l00167}{167} of file \hyperlink{neuron_8c_source}{neuron.\+c}.



References \hyperlink{neuron_8h_source_l00202}{neuron\+State\+::dendrite\+Global\+Dest}, \hyperlink{assist_8h_source_l00071}{Msg\+\_\+\+Data\+::event\+Type}, \hyperlink{neuron_8h_source_l00218}{neuron\+State\+::fired\+Last}, \hyperlink{assist_8c_source_l00041}{get\+Next\+Big\+Tick()}, \hyperlink{assist_8h_source_l00073}{Msg\+\_\+\+Data\+::local\+I\+D}, \hyperlink{neuron_8h_source_l00149}{neuron\+State\+::my\+Local\+I\+D}, and \hyperlink{assist_8h_source_l00061}{N\+E\+U\+R\+O\+N\+\_\+\+O\+U\+T}.



Referenced by \hyperlink{neuron_8c_source_l00103}{neuron\+Receive\+Message()}.


\begin{DoxyCode}
00167                                                           \{
00168     tw\_stime nextHeartbeat = \hyperlink{assist_8c_aa961bc9b414f1429b123fc8212c989fd}{getNextBigTick}(time);
00169     tw\_event *newEvent = tw\_event\_new(st->\hyperlink{structneuron_state_a4199c14c5aabfd52f441e01623bdc84c}{dendriteGlobalDest}, nextHeartbeat, lp);
00170     \hyperlink{struct_msg___data}{Msg\_Data} *data = (\hyperlink{struct_msg___data}{Msg\_Data} *) tw\_event\_data(newEvent);
00171     data->\hyperlink{struct_msg___data_a015b6eb45982e1842ee8fc389a099ced}{eventType} = \hyperlink{assist_8h_a7c1688de451e0dea1e11617bce3ec450a777cedd6ca25a5d7a84aab10a8735af0}{NEURON\_OUT};
00172     data->\hyperlink{struct_msg___data_aefc820e92a74047ec7ed74c1c45f818f}{localID} = st->\hyperlink{structneuron_state_ac24762c24aede292a2ce5df78114881c}{myLocalID};
00173     tw\_event\_send(newEvent);
00174     st->\hyperlink{structneuron_state_a287eb8703dbfb177165d31c8840646b8}{firedLast} = \textcolor{keyword}{true};
00175 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{neuron_8h_a683379b633b55058dd5b8b67929c165c_cgraph}
\end{center}
\end{figure}


\hypertarget{neuron_8h_aabaff47eadb1e61b34c19b6e982f6511}{}\index{neuron.\+h@{neuron.\+h}!neuron\+Post\+Integrate@{neuron\+Post\+Integrate}}
\index{neuron\+Post\+Integrate@{neuron\+Post\+Integrate}!neuron.\+h@{neuron.\+h}}
\subsubsection[{neuron\+Post\+Integrate}]{\setlength{\rightskip}{0pt plus 5cm}void neuron\+Post\+Integrate (
\begin{DoxyParamCaption}
\item[{{\bf neuron\+State} $\ast$}]{st, }
\item[{tw\+\_\+stime}]{time, }
\item[{tw\+\_\+lp $\ast$}]{lp, }
\item[{bool}]{will\+Fire}
\end{DoxyParamCaption}
)}\label{neuron_8h_aabaff47eadb1e61b34c19b6e982f6511}


Function that runs after integration \& firing, for reset function and threshold bounce calls. 


\begin{DoxyParams}{Parameters}
{\em st} & state \\
\hline
{\em time} & event time \\
\hline
{\em lp} & lp \\
\hline
{\em did\+Fire} & did the neuron fire during this big tick?\\
\hline
\end{DoxyParams}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000007}{Todo}]There is potentially an issue here -\/ does the True\+North architecture draw a new pseudorandom number during the threshold, fire, reset functions, or does it resuse them? It looks like re-\/use, so that\textquotesingle{}s what I\textquotesingle{}m doing here. \end{DoxyRefDesc}


Definition at line \hyperlink{neuron_8c_source_l00214}{214} of file \hyperlink{neuron_8c_source}{neuron.\+c}.



References \hyperlink{assist_8h_source_l00023}{\+\_\+rand\+T}, \hyperlink{assist_8h_source_l00022}{\+\_\+thresh\+T}, \hyperlink{assist_8h_source_l00020}{\+\_\+volt\+T}, \hyperlink{neuron_8h_source_l00177}{neuron\+State\+::do\+Reset}, \hyperlink{neuron_8h_source_l00158}{neuron\+State\+::drawn\+Random\+Number}, \hyperlink{assist_8h_source_l00048}{D\+T}, \hyperlink{neuron_8h_source_l00153}{neuron\+State\+::membrane\+Pot}, \hyperlink{neuron_8h_source_l00156}{neuron\+State\+::negative\+Threshold}, \hyperlink{neuron_8h_source_l00182}{neuron\+State\+::neg\+Thres\+Reset}, \hyperlink{neuron_8h_source_l00180}{neuron\+State\+::reset\+Mode}, and \hyperlink{neuron_8h_source_l00160}{neuron\+State\+::reset\+Voltage}.



Referenced by \hyperlink{neuron_8c_source_l00103}{neuron\+Receive\+Message()}.


\begin{DoxyCode}
00214                                                                                   \{
00215     \textcolor{keywordflow}{if}(willFire)\{ \textcolor{comment}{// neuron will/did fire:}
00216         st->\hyperlink{structneuron_state_afcf9d931e4fda519c43b4efeab687463}{doReset}(st);
00217     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (st->\hyperlink{structneuron_state_a0fdd8f44c4105a94e17c4c58a51db486}{membranePot} < -1 * (st->\hyperlink{structneuron_state_a678bcd9f031e290178cd5d2855e74279}{negativeThreshold} * st->
      \hyperlink{structneuron_state_a3ec480684e7a2cfc67a8ef7ac1bf57b9}{negThresReset} + (st->\hyperlink{structneuron_state_a678bcd9f031e290178cd5d2855e74279}{negativeThreshold} + st->
      \hyperlink{structneuron_state_a296a4f04813c4882d6acd8c9074abd35}{drawnRandomNumber})))\{
00218             \textcolor{comment}{//sanity variables for the formulaic reset/bounce instead of calling functions:}
00219         \hyperlink{assist_8h_a5537d30256d443ce07efd3d879a4a720}{\_threshT} B = st->\hyperlink{structneuron_state_a678bcd9f031e290178cd5d2855e74279}{negativeThreshold};
00220         \textcolor{keywordtype}{int} K = st->\hyperlink{structneuron_state_a3ec480684e7a2cfc67a8ef7ac1bf57b9}{negThresReset};
00221         \textcolor{keywordtype}{int} G = st->\hyperlink{structneuron_state_af67bb650aa3150a6a31e16a874d71f91}{resetMode};
00222         \hyperlink{assist_8h_a520ac495f188eb0bc5645cffa3c4328b}{\_randT} n = st->\hyperlink{structneuron_state_a296a4f04813c4882d6acd8c9074abd35}{drawnRandomNumber};
00223         \hyperlink{assist_8h_abe1fc1b8f9efd1187e564bcb8de7f815}{\_voltT} R = st->\hyperlink{structneuron_state_af69a2c108fe9e7154fa047ea5acc5d80}{resetVoltage};
00224         \hyperlink{assist_8h_abe1fc1b8f9efd1187e564bcb8de7f815}{\_voltT} V = st->\hyperlink{structneuron_state_a0fdd8f44c4105a94e17c4c58a51db486}{membranePot};
00225         st->\hyperlink{structneuron_state_a0fdd8f44c4105a94e17c4c58a51db486}{membranePot} = (-(B*K) + (-(\hyperlink{assist_8h_acfde2b62c9c4e0413f3066bbd65c428a}{DT}(G)) * R +
00226                                      \hyperlink{assist_8h_acfde2b62c9c4e0413f3066bbd65c428a}{DT}(G-1) * (V + (B + n)) +
00227                                      \hyperlink{assist_8h_acfde2b62c9c4e0413f3066bbd65c428a}{DT}(G-2) * V) * (1-K));
00228 
00229     \}
00230 
00231 \}
\end{DoxyCode}
\hypertarget{neuron_8h_aa6819d7492f0173f2234ba0b8b0bb674}{}\index{neuron.\+h@{neuron.\+h}!neuron\+Receive\+Message@{neuron\+Receive\+Message}}
\index{neuron\+Receive\+Message@{neuron\+Receive\+Message}!neuron.\+h@{neuron.\+h}}
\subsubsection[{neuron\+Receive\+Message}]{\setlength{\rightskip}{0pt plus 5cm}void neuron\+Receive\+Message (
\begin{DoxyParamCaption}
\item[{{\bf neuron\+State} $\ast$}]{st, }
\item[{tw\+\_\+stime}]{time, }
\item[{{\bf Msg\+\_\+\+Data} $\ast$}]{m, }
\item[{tw\+\_\+lp $\ast$}]{lp}
\end{DoxyParamCaption}
)}\label{neuron_8h_aa6819d7492f0173f2234ba0b8b0bb674}


handles incomming synapse messages. 

In this model, the neurons send messages to axons during \char`\"{}big tick\char`\"{} intervals. This is done through an event sent upon receipt of the first synapse message of the current big-\/tick.


\begin{DoxyParams}{Parameters}
{\em st} & current neuron state \\
\hline
{\em time} & time event was received \\
\hline
{\em m} & event message data \\
\hline
{\em lp} & lp.\\
\hline
\end{DoxyParams}
neruon\+Receive\+Message runs when an event is received by a neuron. The events are handled in the following fashion\+:
\begin{DoxyItemize}
\item If the event is a synapse, the neuron integrates the weight of the synapse into its membrane potential.
\begin{DoxyItemize}
\item The count of big-\/tick synapse messages recived is incremented.
\item If the count changes from zero to one, the function creates and queues a heartbeat event for the next big-\/tick.
\end{DoxyItemize}
\item If the event is a heartbeat, the neuron will leak, potentially fire, and reset.
\end{DoxyItemize}

Big-\/\+Tick events are sent at time $ð’¯_{bigTick} - Îµ$, so that the the event will arrive at the next bit-\/tick time. 

Definition at line \hyperlink{neuron_8c_source_l00103}{103} of file \hyperlink{neuron_8c_source}{neuron.\+c}.



References \hyperlink{neuron_8h_source_l00205}{neuron\+State\+::do\+Leak}, \hyperlink{neuron_8h_source_l00158}{neuron\+State\+::drawn\+Random\+Number}, \hyperlink{assist_8h_source_l00071}{Msg\+\_\+\+Data\+::event\+Type}, \hyperlink{neuron_8h_source_l00214}{neuron\+State\+::fire\+Count}, \hyperlink{neuron_8h_source_l00218}{neuron\+State\+::fired\+Last}, \hyperlink{neuron_8c_source_l00199}{integrate\+Synapse()}, \hyperlink{neuron_8h_source_l00161}{neuron\+State\+::last\+Active\+Time}, \hyperlink{neuron_8h_source_l00162}{neuron\+State\+::last\+Leak\+Time}, \hyperlink{assist_8h_source_l00073}{Msg\+\_\+\+Data\+::local\+I\+D}, \hyperlink{neuron_8h_source_l00153}{neuron\+State\+::membrane\+Pot}, \hyperlink{assist_8h_source_l00062}{N\+E\+U\+R\+O\+N\+\_\+\+H\+E\+A\+R\+T\+B\+E\+A\+T}, \hyperlink{neuron_8c_source_l00167}{neuron\+Fire()}, \hyperlink{neuron_8c_source_l00214}{neuron\+Post\+Integrate()}, \hyperlink{neuron_8c_source_l00161}{neuron\+Should\+Fire()}, \hyperlink{neuron_8h_source_l00215}{neuron\+State\+::rcvd\+Msg\+Count}, \hyperlink{neuron_8h_source_l00166}{neuron\+State\+::received\+Synapse\+Msgs}, \hyperlink{assist_8h_source_l00072}{Msg\+\_\+\+Data\+::rnd\+Call\+Count}, \hyperlink{neuron_8h_source_l00164}{neuron\+State\+::saved\+Last\+Active\+Time}, \hyperlink{neuron_8h_source_l00165}{neuron\+State\+::saved\+Last\+Leak\+Time}, \hyperlink{neuron_8h_source_l00154}{neuron\+State\+::saved\+Membrane\+Pot}, \hyperlink{neuron_8c_source_l00179}{send\+Heartbeat()}, \hyperlink{neuron_8h_source_l00216}{neuron\+State\+::\+S\+O\+P\+S\+Count}, \hyperlink{assist_8h_source_l00060}{S\+Y\+N\+A\+P\+S\+E\+\_\+\+O\+U\+T}, and \hyperlink{neuron_8h_source_l00157}{neuron\+State\+::threshold\+P\+R\+N\+Mask}.


\begin{DoxyCode}
00104           \{
00105     \textcolor{keywordtype}{bool} willFire = \textcolor{keyword}{false};
00106     st->\hyperlink{structneuron_state_a287eb8703dbfb177165d31c8840646b8}{firedLast} = \textcolor{keyword}{false};
00107         \textcolor{comment}{//save the previous state of the neuron:}
00108     st->\hyperlink{structneuron_state_a50734a9ba605a083a90814b63d039a03}{savedLastLeakTime} = st->\hyperlink{structneuron_state_a6f4e4d8fc1cf0257b486e01f628d2656}{lastLeakTime};
00109     st->\hyperlink{structneuron_state_a6922b3f3041346eb83cfc6352a22277b}{savedLastActiveTime} = st->\hyperlink{structneuron_state_a0658ad1f8b57a00589c6ea84f9a4ab13}{lastActiveTime};
00110     st->\hyperlink{structneuron_state_a5efe5de0478ea513ed5d90d89a49fcca}{savedMembranePot} = st->\hyperlink{structneuron_state_a0fdd8f44c4105a94e17c4c58a51db486}{membranePot};
00111         \textcolor{comment}{//random fn call state management.}
00112     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} startCount = lp->rng->count;
00113 
00114     \textcolor{keywordflow}{switch} (m->\hyperlink{struct_msg___data_a015b6eb45982e1842ee8fc389a099ced}{eventType}) \{
00115   \textcolor{keywordflow}{case} \hyperlink{assist_8h_a7c1688de451e0dea1e11617bce3ec450a6ad6b93d8a818550e7246f6e0d143afb}{SYNAPSE\_OUT}:
00116             \hyperlink{neuron_8c_ae630bdf5dd3744870968f07a6971659c}{integrateSynapse}(m->\hyperlink{struct_msg___data_aefc820e92a74047ec7ed74c1c45f818f}{localID}, st, lp);
00117 
00118                 \textcolor{comment}{//next, we will check if a heartbeat message should be sent}
00119             \textcolor{keywordflow}{if}(st->\hyperlink{structneuron_state_af8935bcba177f2f3dfb9119c39ef7dc5}{receivedSynapseMsgs} == 0) \{
00120                 \hyperlink{neuron_8c_a766dff9e530486b055e97ebe392268b8}{sendHeartbeat}(st, lp, time);
00121             \}
00122             st->\hyperlink{structneuron_state_af8935bcba177f2f3dfb9119c39ef7dc5}{receivedSynapseMsgs} ++;
00123 
00124 
00125             \textcolor{keywordflow}{break};
00126 
00127         \textcolor{keywordflow}{case} \hyperlink{assist_8h_a7c1688de451e0dea1e11617bce3ec450a226690009a653238a52339561e6c466e}{NEURON\_HEARTBEAT}:
00128             st->\hyperlink{structneuron_state_af8935bcba177f2f3dfb9119c39ef7dc5}{receivedSynapseMsgs} = 0;
00129                 \textcolor{comment}{//set up drawn random number for the heartbeat.}
00130             \textcolor{keywordflow}{if}(st->\hyperlink{structneuron_state_aa501d6ee7cacd5435deec79c07637b08}{thresholdPRNMask} != 0)
00131                 st->\hyperlink{structneuron_state_a296a4f04813c4882d6acd8c9074abd35}{drawnRandomNumber} = tw\_rand\_integer(lp->rng, 0, st->
      \hyperlink{structneuron_state_aa501d6ee7cacd5435deec79c07637b08}{thresholdPRNMask});
00132 
00133                 \textcolor{comment}{//Currently operates - leak->fire->(reset)}
00134             st->\hyperlink{structneuron_state_aa430f424f34dc59dc27736e27ec61320}{doLeak}(st, time);
00135             willFire = \hyperlink{neuron_8c_a3520b013e0c2f711b9f5c16e19306be6}{neuronShouldFire}(st,lp);
00136             \textcolor{keywordflow}{if}(willFire)\{
00137                 \hyperlink{neuron_8c_a683379b633b55058dd5b8b67929c165c}{neuronFire}(st, time, lp);
00138                 st->\hyperlink{structneuron_state_afe8825076c4cf3863c677307fec63c61}{fireCount} ++;
00139             \}
00140 
00141             \hyperlink{neuron_8c_aabaff47eadb1e61b34c19b6e982f6511}{neuronPostIntegrate}(st, time, lp, willFire);
00142             \textcolor{comment}{//stats collection}
00143             st->\hyperlink{structneuron_state_a71fbb9a79e8048b473b6e09d29a64bbe}{SOPSCount} ++;
00144             st->\hyperlink{structneuron_state_a0658ad1f8b57a00589c6ea84f9a4ab13}{lastActiveTime} = tw\_now(lp);
00145             \textcolor{keywordflow}{break};
00146 
00147   \textcolor{keywordflow}{default}:
00148                 \textcolor{comment}{//Error condition - non-valid input.}
00149             \textcolor{keywordflow}{break};
00150     \}
00151 
00152         \textcolor{comment}{//store the random calls in the message:}
00153     m->\hyperlink{struct_msg___data_a2e49a6bcc6c45ade722f746b1ea707f2}{rndCallCount} = lp->rng->count - startCount;
00154 
00155     st->\hyperlink{structneuron_state_ab8f63a1dfdb2992657530ff8a63fdc01}{rcvdMsgCount} ++;
00156 
00157 
00158 
00159 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{neuron_8h_aa6819d7492f0173f2234ba0b8b0bb674_cgraph}
\end{center}
\end{figure}


\hypertarget{neuron_8h_a01dcc8e3f0132786bd59ecb847013284}{}\index{neuron.\+h@{neuron.\+h}!neuron\+Reverse\+Final@{neuron\+Reverse\+Final}}
\index{neuron\+Reverse\+Final@{neuron\+Reverse\+Final}!neuron.\+h@{neuron.\+h}}
\subsubsection[{neuron\+Reverse\+Final}]{\setlength{\rightskip}{0pt plus 5cm}void neuron\+Reverse\+Final (
\begin{DoxyParamCaption}
\item[{{\bf neuron\+State} $\ast$}]{s, }
\item[{tw\+\_\+bf $\ast$}]{C\+V, }
\item[{{\bf Msg\+\_\+\+Data} $\ast$}]{m, }
\item[{tw\+\_\+lp $\ast$}]{lp}
\end{DoxyParamCaption}
)}\label{neuron_8h_a01dcc8e3f0132786bd59ecb847013284}


neuron\+Reverse\+Final final neuron reversal function. 

Used to roll back any calls made by the neuron. Decrements received\+Synapse\+Msgs Reset funs have already been run at this point \begin{DoxySeeAlso}{See also}
\hyperlink{neuron_8h_abf61b10b4b6116161a9e5c9d7ac54be1}{reverse\+Leak\+Del()} and 

\hyperlink{neuron_8h_aa939c0acc5b3367975f2f0cb7bc36d17}{reverse\+Reset\+Del()} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em s} & the neuron state \\
\hline
{\em C\+V} & transported bitfield \\
\hline
{\em m} & the rollback message \\
\hline
{\em lp} & the lp \\
\hline
\end{DoxyParams}
\hypertarget{neuron_8h_a3520b013e0c2f711b9f5c16e19306be6}{}\index{neuron.\+h@{neuron.\+h}!neuron\+Should\+Fire@{neuron\+Should\+Fire}}
\index{neuron\+Should\+Fire@{neuron\+Should\+Fire}!neuron.\+h@{neuron.\+h}}
\subsubsection[{neuron\+Should\+Fire}]{\setlength{\rightskip}{0pt plus 5cm}bool neuron\+Should\+Fire (
\begin{DoxyParamCaption}
\item[{{\bf neuron\+State} $\ast$}]{st, }
\item[{tw\+\_\+lp $\ast$}]{lp}
\end{DoxyParamCaption}
)}\label{neuron_8h_a3520b013e0c2f711b9f5c16e19306be6}


Checks to see if a neuron should fire. 

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000008}{Todo}]check to see if this is needed, since it looks like just a simple if statement is in order.\end{DoxyRefDesc}



\begin{DoxyParams}{Parameters}
{\em st} & neuron state\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the neuron is ready to fire. 
\end{DoxyReturn}


Definition at line \hyperlink{neuron_8c_source_l00161}{161} of file \hyperlink{neuron_8c_source}{neuron.\+c}.



References \hyperlink{neuron_8h_source_l00158}{neuron\+State\+::drawn\+Random\+Number}, \hyperlink{neuron_8h_source_l00153}{neuron\+State\+::membrane\+Pot}, and \hyperlink{neuron_8h_source_l00155}{neuron\+State\+::threshold}.



Referenced by \hyperlink{neuron_8c_source_l00103}{neuron\+Receive\+Message()}.


\begin{DoxyCode}
00161                                                  \{
00162         \textcolor{comment}{//check negative threshold values:}
00163 
00164     \textcolor{keywordflow}{return} st->\hyperlink{structneuron_state_a0fdd8f44c4105a94e17c4c58a51db486}{membranePot} >= st->\hyperlink{structneuron_state_a132470c4c17828c209e3403ccf7ee680}{threshold} + st->
      \hyperlink{structneuron_state_a296a4f04813c4882d6acd8c9074abd35}{drawnRandomNumber};
00165 \}
\end{DoxyCode}
\hypertarget{neuron_8h_a8e52befc10f975c6be39cc93af573d7e}{}\index{neuron.\+h@{neuron.\+h}!no\+Leak@{no\+Leak}}
\index{no\+Leak@{no\+Leak}!neuron.\+h@{neuron.\+h}}
\subsubsection[{no\+Leak}]{\setlength{\rightskip}{0pt plus 5cm}void no\+Leak (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron, }
\item[{tw\+\_\+stime}]{now}
\end{DoxyParamCaption}
)}\label{neuron_8h_a8e52befc10f975c6be39cc93af573d7e}


no\+Leak -\/ A non leaking neuron function. 


\begin{DoxyParams}{Parameters}
{\em neuron} & The current neuron state. \\
\hline
{\em now} & The current simulation time. \\
\hline
\end{DoxyParams}


Definition at line \hyperlink{neuron_8c_source_l00016}{16} of file \hyperlink{neuron_8c_source}{neuron.\+c}.


\begin{DoxyCode}
00016                                         \{
00017   \textcolor{comment}{// do nothing!!}
00018 \}
\end{DoxyCode}
\hypertarget{neuron_8h_a2e78d7d2b70bf7349c3854b3727dcc25}{}\index{neuron.\+h@{neuron.\+h}!reset\+Linear@{reset\+Linear}}
\index{reset\+Linear@{reset\+Linear}!neuron.\+h@{neuron.\+h}}
\subsubsection[{reset\+Linear}]{\setlength{\rightskip}{0pt plus 5cm}void reset\+Linear (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron\+State}
\end{DoxyParamCaption}
)}\label{neuron_8h_a2e78d7d2b70bf7349c3854b3727dcc25}


Resets neuron voltage based on linear function. 


\begin{DoxyParams}{Parameters}
{\em \hyperlink{structneuron_state}{neuron\+State}} & \hyperlink{structneuron_state}{neuron\+State}\\
\hline
\end{DoxyParams}
Linear reset mode -\/ ignores $R$, and sets the membrane potential to the difference between the threshold and the potential. 

Definition at line \hyperlink{neuron_8c_source_l00066}{66} of file \hyperlink{neuron_8c_source}{neuron.\+c}.


\begin{DoxyCode}
00066                                     \{
00067     \textcolor{keyword}{struct }NeuronModel *s = (\textcolor{keyword}{struct }NeuronModel *)\hyperlink{structneuron_state}{neuronState};
00068     s->\hyperlink{structneuron_state_a0fdd8f44c4105a94e17c4c58a51db486}{membranePot} = s->membranePot - s->threshold;
00069 \}
\end{DoxyCode}
\hypertarget{neuron_8h_a6e11be912b4860cd1978b2d8c49b9703}{}\index{neuron.\+h@{neuron.\+h}!reset\+None@{reset\+None}}
\index{reset\+None@{reset\+None}!neuron.\+h@{neuron.\+h}}
\subsubsection[{reset\+None}]{\setlength{\rightskip}{0pt plus 5cm}void reset\+None (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron\+State}
\end{DoxyParamCaption}
)}\label{neuron_8h_a6e11be912b4860cd1978b2d8c49b9703}


No reset function -\/ does not reset membrane potential after firing. 


\begin{DoxyParams}{Parameters}
{\em \hyperlink{structneuron_state}{neuron\+State}} & current neuron state. \\
\hline
\end{DoxyParams}
\hypertarget{neuron_8h_a233aa7ebe6cbfb664fe366a05a8dac1f}{}\index{neuron.\+h@{neuron.\+h}!reset\+Normal@{reset\+Normal}}
\index{reset\+Normal@{reset\+Normal}!neuron.\+h@{neuron.\+h}}
\subsubsection[{reset\+Normal}]{\setlength{\rightskip}{0pt plus 5cm}void reset\+Normal (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron\+State}
\end{DoxyParamCaption}
)}\label{neuron_8h_a233aa7ebe6cbfb664fe366a05a8dac1f}


Resets neuron voltage to $R$ after firing. 

a normal reset mode function.


\begin{DoxyParams}{Parameters}
{\em \hyperlink{structneuron_state}{neuron\+State}} & current neuron state \\
\hline
\end{DoxyParams}


Definition at line \hyperlink{neuron_8c_source_l00056}{56} of file \hyperlink{neuron_8c_source}{neuron.\+c}.


\begin{DoxyCode}
00056                                     \{
00057     \textcolor{keyword}{struct }NeuronModel *s = (\textcolor{keyword}{struct }NeuronModel *)\hyperlink{structneuron_state}{neuronState};
00058     s->\hyperlink{structneuron_state_a0fdd8f44c4105a94e17c4c58a51db486}{membranePot} = s->resetVoltage; \textcolor{comment}{// set current voltage to \(\backslash\)f$R\(\backslash\)f$.}
00059 \}
\end{DoxyCode}
\hypertarget{neuron_8h_a09e54832158e2f6abe898437979aae00}{}\index{neuron.\+h@{neuron.\+h}!reverse\+Reset\+Linear@{reverse\+Reset\+Linear}}
\index{reverse\+Reset\+Linear@{reverse\+Reset\+Linear}!neuron.\+h@{neuron.\+h}}
\subsubsection[{reverse\+Reset\+Linear}]{\setlength{\rightskip}{0pt plus 5cm}void reverse\+Reset\+Linear (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron\+State}
\end{DoxyParamCaption}
)}\label{neuron_8h_a09e54832158e2f6abe898437979aae00}


Definition at line \hyperlink{neuron_8c_source_l00071}{71} of file \hyperlink{neuron_8c_source}{neuron.\+c}.



References \hyperlink{assist_8h_source_l00020}{\+\_\+volt\+T}.


\begin{DoxyCode}
00071                                           \{
00072     \textcolor{keyword}{struct }NeuronModel *s = (\textcolor{keyword}{struct }NeuronModel *)\hyperlink{structneuron_state}{neuronState};
00073     \hyperlink{assist_8h_abe1fc1b8f9efd1187e564bcb8de7f815}{\_voltT} resetParam = (\hyperlink{assist_8h_abe1fc1b8f9efd1187e564bcb8de7f815}{\_voltT}) &resetParam;
00074     s->membranePot = s->membranePot + resetParam;
00075 \}
\end{DoxyCode}
\hypertarget{neuron_8h_a50b2475c0a8d745eb8f144b72d7eabdf}{}\index{neuron.\+h@{neuron.\+h}!reverse\+Reset\+None@{reverse\+Reset\+None}}
\index{reverse\+Reset\+None@{reverse\+Reset\+None}!neuron.\+h@{neuron.\+h}}
\subsubsection[{reverse\+Reset\+None}]{\setlength{\rightskip}{0pt plus 5cm}void reverse\+Reset\+None (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron\+State}
\end{DoxyParamCaption}
)}\label{neuron_8h_a50b2475c0a8d745eb8f144b72d7eabdf}
\hypertarget{neuron_8h_ae53276ccdb759ba1ea09806cbf9fc940}{}\index{neuron.\+h@{neuron.\+h}!reverse\+Reset\+Zero@{reverse\+Reset\+Zero}}
\index{reverse\+Reset\+Zero@{reverse\+Reset\+Zero}!neuron.\+h@{neuron.\+h}}
\subsubsection[{reverse\+Reset\+Zero}]{\setlength{\rightskip}{0pt plus 5cm}void reverse\+Reset\+Zero (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron\+State}
\end{DoxyParamCaption}
)}\label{neuron_8h_ae53276ccdb759ba1ea09806cbf9fc940}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000006}{Todo}]\+: Check that this is the proper way to handle reset zero function \end{DoxyRefDesc}


Definition at line \hyperlink{neuron_8c_source_l00079}{79} of file \hyperlink{neuron_8c_source}{neuron.\+c}.


\begin{DoxyCode}
00079                                         \{
00080 
00081 \}
\end{DoxyCode}
\hypertarget{neuron_8h_a26ced40d7ad7a0b448a136d8724fe18b}{}\index{neuron.\+h@{neuron.\+h}!rev\+Linear\+Leak@{rev\+Linear\+Leak}}
\index{rev\+Linear\+Leak@{rev\+Linear\+Leak}!neuron.\+h@{neuron.\+h}}
\subsubsection[{rev\+Linear\+Leak}]{\setlength{\rightskip}{0pt plus 5cm}void rev\+Linear\+Leak (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron, }
\item[{tw\+\_\+stime}]{now}
\end{DoxyParamCaption}
)}\label{neuron_8h_a26ced40d7ad7a0b448a136d8724fe18b}


Reverse leak function neurons that have a linear leak function assigned. 


\begin{DoxyParams}{Parameters}
{\em neuron} & current neuron state \\
\hline
{\em now} & tw\+\_\+stime representing current time of simulation. \\
\hline
\end{DoxyParams}


Definition at line \hyperlink{neuron_8c_source_l00037}{37} of file \hyperlink{neuron_8c_source}{neuron.\+c}.



References \hyperlink{neuron_8h_source_l00162}{neuron\+State\+::last\+Leak\+Time}.


\begin{DoxyCode}
00037                                               \{
00038     \hyperlink{structneuron_state}{neuronState} *s = (\hyperlink{structneuron_state}{neuronState} *)neuron;
00039     tw\_stime delta = s->\hyperlink{structneuron_state_a6f4e4d8fc1cf0257b486e01f628d2656}{lastLeakTime} - now;
00040 
00041         \textcolor{comment}{//s->membranePot += s->leakRate * delta;}
00042     s->\hyperlink{structneuron_state_a6f4e4d8fc1cf0257b486e01f628d2656}{lastLeakTime} = now;
00043 \}
\end{DoxyCode}
\hypertarget{neuron_8h_ac5bebec77c5216533ec5f6acd086532e}{}\index{neuron.\+h@{neuron.\+h}!rev\+No\+Leak@{rev\+No\+Leak}}
\index{rev\+No\+Leak@{rev\+No\+Leak}!neuron.\+h@{neuron.\+h}}
\subsubsection[{rev\+No\+Leak}]{\setlength{\rightskip}{0pt plus 5cm}void rev\+No\+Leak (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{neuron, }
\item[{tw\+\_\+stime}]{now}
\end{DoxyParamCaption}
)}\label{neuron_8h_ac5bebec77c5216533ec5f6acd086532e}


Reverse leak function for use when neurons have no defined leak function. 


\begin{DoxyParams}{Parameters}
{\em neuron} & current neuron state \\
\hline
{\em now} & tw\+\_\+stime representing current time of simulation. \\
\hline
\end{DoxyParams}


Definition at line \hyperlink{neuron_8c_source_l00019}{19} of file \hyperlink{neuron_8c_source}{neuron.\+c}.


\begin{DoxyCode}
00019                                            \{
00020   \textcolor{comment}{// do nothing!!}
00021 \}
\end{DoxyCode}
\hypertarget{neuron_8h_a766dff9e530486b055e97ebe392268b8}{}\index{neuron.\+h@{neuron.\+h}!send\+Heartbeat@{send\+Heartbeat}}
\index{send\+Heartbeat@{send\+Heartbeat}!neuron.\+h@{neuron.\+h}}
\subsubsection[{send\+Heartbeat}]{\setlength{\rightskip}{0pt plus 5cm}void send\+Heartbeat (
\begin{DoxyParamCaption}
\item[{{\bf neuron\+State} $\ast$}]{st, }
\item[{tw\+\_\+lp $\ast$}]{lp, }
\item[{tw\+\_\+stime}]{time}
\end{DoxyParamCaption}
)}\label{neuron_8h_a766dff9e530486b055e97ebe392268b8}


Function that sends a heartbeat message to this neuron. 


\begin{DoxyParams}{Parameters}
{\em lp} & $<$\#lp description\#$>$ \\
\hline
{\em time} & $<$\#time description\#$>$ \\
\hline
\end{DoxyParams}


Definition at line \hyperlink{neuron_8c_source_l00179}{179} of file \hyperlink{neuron_8c_source}{neuron.\+c}.



References \hyperlink{assist_8h_source_l00071}{Msg\+\_\+\+Data\+::event\+Type}, \hyperlink{assist_8c_source_l00041}{get\+Next\+Big\+Tick()}, \hyperlink{assist_8h_source_l00073}{Msg\+\_\+\+Data\+::local\+I\+D}, \hyperlink{neuron_8h_source_l00149}{neuron\+State\+::my\+Local\+I\+D}, and \hyperlink{assist_8h_source_l00062}{N\+E\+U\+R\+O\+N\+\_\+\+H\+E\+A\+R\+T\+B\+E\+A\+T}.



Referenced by \hyperlink{neuron_8c_source_l00103}{neuron\+Receive\+Message()}.


\begin{DoxyCode}
00179                                                              \{
00180         \textcolor{comment}{//heartbeat message gen:}
00181     tw\_stime nextHeartbeat = \hyperlink{assist_8c_aa961bc9b414f1429b123fc8212c989fd}{getNextBigTick}(time);
00182     tw\_event *newEvent = tw\_event\_new(lp->gid, nextHeartbeat, lp);
00183     \hyperlink{struct_msg___data}{Msg\_Data} *data = (\hyperlink{struct_msg___data}{Msg\_Data} *) tw\_event\_data(newEvent);
00184     data->\hyperlink{struct_msg___data_a015b6eb45982e1842ee8fc389a099ced}{eventType} = \hyperlink{assist_8h_a7c1688de451e0dea1e11617bce3ec450a226690009a653238a52339561e6c466e}{NEURON\_HEARTBEAT};
00185     data->\hyperlink{struct_msg___data_aefc820e92a74047ec7ed74c1c45f818f}{localID} = st->\hyperlink{structneuron_state_ac24762c24aede292a2ce5df78114881c}{myLocalID};
00186     tw\_event\_send(newEvent);
00187 
00188 
00189 \}
\end{DoxyCode}


Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{neuron_8h_a766dff9e530486b055e97ebe392268b8_cgraph}
\end{center}
\end{figure}


\hypertarget{neuron_8h_afee2e0acc66d8d10aee8d52c8d245c82}{}\index{neuron.\+h@{neuron.\+h}!stochastic\+Integrate@{stochastic\+Integrate}}
\index{stochastic\+Integrate@{stochastic\+Integrate}!neuron.\+h@{neuron.\+h}}
\subsubsection[{stochastic\+Integrate}]{\setlength{\rightskip}{0pt plus 5cm}void stochastic\+Integrate (
\begin{DoxyParamCaption}
\item[{{\bf \+\_\+weight\+T}}]{weight, }
\item[{{\bf neuron\+State} $\ast$}]{st, }
\item[{tw\+\_\+lp $\ast$}]{lp}
\end{DoxyParamCaption}
)}\label{neuron_8h_afee2e0acc66d8d10aee8d52c8d245c82}


Neuron stochastic integration function -\/ for use with stochastic leaks and synapse messages. 


\begin{DoxyParams}{Parameters}
{\em weight} & weight of selected leak or synapse \\
\hline
{\em st} & the neuron state \\
\hline
{\em lp} & lp for range functions. \\
\hline
\end{DoxyParams}


Definition at line \hyperlink{neuron_8c_source_l00191}{191} of file \hyperlink{neuron_8c_source}{neuron.\+c}.



References \hyperlink{assist_8h_source_l00052}{B\+I\+N\+C\+O\+M\+P}, \hyperlink{neuron_8h_source_l00158}{neuron\+State\+::drawn\+Random\+Number}, \hyperlink{neuron_8h_source_l00153}{neuron\+State\+::membrane\+Pot}, and \hyperlink{assist_8h_source_l00050}{S\+G\+N}.



Referenced by \hyperlink{neuron_8c_source_l00199}{integrate\+Synapse()}.


\begin{DoxyCode}
00191                                                                      \{
00192     \textcolor{keywordtype}{long} drawnRandom = st->\hyperlink{structneuron_state_a296a4f04813c4882d6acd8c9074abd35}{drawnRandomNumber};
00193     \textcolor{keywordflow}{if} (\hyperlink{assist_8h_abbf94867faa4abd8c53c87576efd05f3}{BINCOMP}(weight, drawnRandom))\{
00194         st->\hyperlink{structneuron_state_a0fdd8f44c4105a94e17c4c58a51db486}{membranePot} += \hyperlink{assist_8h_a95ed41486ca0ed53262e4b8934d4afac}{SGN}(weight);
00195     \}
00196 \}
\end{DoxyCode}
